# Managed by Saltstack - do NOT edit this file manually
{% from "apache/map.jinja" import apache with context -%}
ServerRoot "/etc/httpd"
Listen 80
Include conf.modules.d/*.conf
{%- for module in salt['pillar.get']('apache:modules:enabled', []) %}
LoadModule {{ module }}_module modules/mod_{{ module }}.so
{%- endfor %}
User apache
Group apache
ServerAdmin root@localhost
<Directory />
    AllowOverride none
{%- if apache.version == '2.2' %}
    Order allow,deny
    Deny from all
{%- else %}
    Require all denied
{%- endif %}
</Directory>
DocumentRoot "/var/www/html"
<Directory "/var/www">
    AllowOverride None
{%- if apache.version == '2.2' %}
    Order allow,deny
    Allow from all
{%- else %}
    Require all granted
{%- endif %}
</Directory>
<Directory "/var/www/html">
    Options Indexes FollowSymLinks
    AllowOverride None
{%- if apache.version == '2.2' %}
    Order allow,deny
    Allow from all
{%- else %}
    Require all granted
{%- endif %}
</Directory>
<IfModule dir_module>
    DirectoryIndex index.html
</IfModule>
<Files ".ht*">
{%- if apache.version == '2.2' %}
    Order allow,deny
    Deny from all
    Satisfy All
{%- else %}
    Require all denied
{%- endif %}
</Files>
ErrorLog "logs/error_log"
LogLevel warn
<IfModule log_config_module>
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %>s %b" common
    {%- for log_format in salt['pillar.get']('apache:log_formats', []) %}
    LogFormat {{ log_format }}
    {%- endfor %}
    <IfModule logio_module>
      LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\" %I %O" combinedio
    </IfModule>
    CustomLog "logs/access_log" combined
</IfModule>
<IfModule alias_module>
    ScriptAlias /cgi-bin/ "/var/www/cgi-bin/"
</IfModule>
<Directory "/var/www/cgi-bin">
    AllowOverride None
    Options None
{%- if apache.version == '2.2' %}
    Order allow,deny
    Allow from all
{%- else %}
    Require all granted
{%- endif %}
</Directory>
<IfModule mime_module>
    TypesConfig /etc/mime.types
    AddType application/x-compress .Z
    AddType application/x-gzip .gz .tgz
    AddType text/html .shtml
    AddOutputFilter INCLUDES .shtml
</IfModule>
AddDefaultCharset UTF-8
<IfModule mime_magic_module>
    MIMEMagicFile conf/magic
</IfModule>
EnableSendfile on
{%- if apache.version == '2.2' %}
Include conf.d/*.conf
{%- else %}
IncludeOptional conf.d/*.conf
{%- endif %}
ServerTokens Prod
Timeout 60
PidFile run/httpd.pid
{%- if apache.version == '2.2' %}
Include vhosts.d/*.conf
{%- else %}
IncludeOptional vhosts.d/*.conf
{%- endif %}
